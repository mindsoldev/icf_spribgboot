<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org">
<head>
<meta name="viewport"
	content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="">
<meta name="author" content="">
<title>Please sign in</title>
<link
	href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css"
	rel="stylesheet"
	integrity="sha384-/Y6pD6FV/Vv2HJnA6t+vslU6fwYXjCFtcEpHbNJ0lyAFsXTsjBbfaDjzALeQsN6M"
	crossorigin="anonymous">
<link
	href="https://getbootstrap.com/docs/4.0/examples/signin/signin.css"
	rel="stylesheet" crossorigin="anonymous" />
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<!-- <script th:src="@{jquery.session.js}"></script> -->
<title>Spring Security Example</title>
</head>
<body>

	<div class="container">

		<form class="form-signin" th:action="@{/login}" method="post">
			<h2 class="form-signin-heading">Please sign in</h2>
			<div th:if="${param.error}" class="alert alert-danger">
				<span th:if="${mustCaptcha == true}">Invalid user, password or verification</span> 
				<span th:unless="${mustCaptcha == true}">Invalid user, password</span> 
				<br />
			</div>
			<div th:if="${param.logout}" class="alert alert-success">
				You have been logged out.
	            <br />
            </div>
            <div>
				<label for="username" class="sr-only">Username</label> 
				<input type="text" id="username" name="username" class="form-control"
					placeholder="Username" required autofocus />
			<br />
			</div>
			<div>
				<label for="password" class="sr-only">Password</label> 
				<input type="password" id="password" name="password" class="form-control"
					placeholder="Password" required autofocus />
			<br />
			</div>
			<div th:if="${mustCaptcha == true}">
				<label for="captchaImg" class="sr-only">Captcha</label> 
				<img id="captchaImg" th:src="*{'data:captcha/jpg;base64,'+ captchaImg}"/>
				<input type="hidden" th:with="name=*{hiddenCaptcha}" th:value="${hiddenCaptcha}"/>
				<input type="text" th:value="*{captcha}" class="form-control" id="captcha" name="captcha" 
					placeholder="Copy the characters above"/>
			<br />
			<!-- <input type="text" th:value="${#session.getAttribute('captchaAnswer')}" th:attr="name='captchaAnswer'"/> -->
			</div>
			<div>
			<button class="btn btn-lg btn-primary btn-block" type="submit">Sign
				in</button>
			</div>
		</form>
	</div>

</body>

</html>